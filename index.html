<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Carte du monde interactive – pays et villes</title>

<!-- Leaflet CSS & JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
  body { margin: 0; font-family: Arial, sans-serif; }
  #controls {
    padding: 10px;
    background: #f2f2f2;
    border-bottom: 1px solid #ccc;
  }
  #map { height: calc(100vh - 60px); }
  input, button { padding: 5px; font-size: 14px; }
</style>
</head>

<body>

<div id="controls">
  <label>Pays :</label>
  <input id="countryInput" placeholder="France"/>
  <button onclick="colorCountry()">Colorer en bleu</button>
  <span style="margin-left:20px;">Clique sur la carte pour ajouter une ville</span>
</div>

<div id="map"></div>

<script>
  // Initialisation de la carte
  const map = L.map('map').setView([20, 0], 2);

  // Fond OpenStreetMap
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap'
  }).addTo(map);

  // Styles
  function defaultStyle() {
    return { color: '#555', weight: 1, fillOpacity: 0 };
  }

  function blueStyle() {
    return { fillColor: 'blue', fillOpacity: 0.5 };
  }

  // Chargement des pays depuis GeoJSON complet
  let countriesLayer;

  fetch("https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json")
    .then(res => res.json())
    .then(data => {
      countriesLayer = L.geoJSON(data, { style: defaultStyle }).addTo(map);
    });

  // Fonction pour colorer un pays par son nom
  function colorCountry() {
    const input = document.getElementById('countryInput').value.toLowerCase();
    if (!countriesLayer) return;

    countriesLayer.eachLayer(layer => {
      const name = layer.feature.properties.name.toLowerCase();
      layer.setStyle(defaultStyle());
      if (name === input) {
        layer.setStyle(blueStyle());
        map.fitBounds(layer.getBounds());
      }
    });
  }

  // Ajouter une ville au clic
  map.on('click', e => {
    const name = prompt("Nom de la ville ?");
    if (!name) return;

    L.circleMarker(e.latlng, {
      radius: 5,
      color: 'red',
      fillOpacity: 1
    }).addTo(map).bindPopup(name);
  });
</script>

</body>
</html>






